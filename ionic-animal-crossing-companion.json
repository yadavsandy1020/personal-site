{"slug":"ionic-animal-crossing-companion","title":"Developing an Animal Crossing companion app with Ionic","date":"2020-07-28T00:00:00.000Z","excerpt":"No bells were spent while building this app.","tags":["Ionic","PWA","Open Source","Games"],"html":"<p>This year I‚Äôve played a lot of Animal Crossing New Horizons. It came out at the start of quarantine - and was extremely popular for providing an escape from that, with a virtual life that‚Äôs free of the problems we‚Äôre facing on the real one.</p>\n<p>In the meantime, I was re-discovering <a href=\"https://ionicframework.com/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Ionic</a> and wanted to work on an app that would help me improve my knowledge of it, and as a bonus learn about other stuff I‚Äôve been interested in. So, I decided to work on a companion app for the game I‚Äôve been playing so much.</p>\n<p>This post illustrates my experience developing it. It is not a tutorial or an in-depth guide. It‚Äôs just meant to describe my experience, what I learned and any bumps in the way. In any case, the <a href=\"https://github.com/matfantinel/acnh-pocket-companion\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">source code is available on GitHub</a> for all to see and modify. If it ends up helping anyone else in the way, even better!</p>\n<p><a href=\"https://pocketcompanion.fantinel.dev\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">You can check out the finalized app here</a>.</p>\n<h2>Creating the app</h2>\n<p>Since I‚Äôm testing Ionic (version 5 as of writing), I tried to check out as much of the experience they provide as I could. Even though you can create an app via their CLI, they also provide <a href=\"https://ionicframework.com/start\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">an online App Wizard</a> to do that visually. It‚Äôs a pretty cool way to display the starting templates, easily setting theme colors, default icon and the JS Framework you‚Äôll use. I chose Angular for this one.</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/wizard.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/wizard.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/ionic-animal-crossing-companion/wizard.png\" alt=\"Ionic app creation Wizard\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<p>After setting it up, the wizard gives you a CLI command with an ID to run on your machine. Therefore it still uses the CLI in the end, but it‚Äôs a nice touch for the starting experience.</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/all-set.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/all-set.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/ionic-animal-crossing-companion/all-set.png\" alt=\"The wizard gives you a CLI command with an ID for you to run on your machine\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<p>After running that command, the CLI prompted me if I wanted to integrate with <a href=\"https://capacitorjs.com/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Capacitor</a>, which is a tool that makes the app deployable to Android/iOS. I accepted, since I plan to release it on the Play Store at some point. The main goal is to release the app as a <a href=\"/what-are-pwas-and-why-should-i-care-about-them/\">PWA</a>, but an Android version wouldn‚Äôt hurt, since the publishing process is almost-free and there‚Äôs almost zero extra effort involved. Publishing it for iPhones is not a goal due to the cost and effort required to publish on the App Store.</p>\n<p>After installation, I could run the app with <code>ionic serve</code>, which resulted in a template app with the settings I had set on the App Wizard.</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/initial-template.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/initial-template.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/ionic-animal-crossing-companion/initial-template.png\" alt=\"The app created from the template created earlier\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<p>The default folder structure is pretty straightforward and should be familiar to anyone who has ever worked with Angular before.</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/default-folder-structure.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/default-folder-structure.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/ionic-animal-crossing-companion/default-folder-structure.png\" alt=\"Default folder structure on an Ionic Angular app\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<h2>Starting development</h2>\n<p>Since I am a visual person, I decided to start work by changing the looks of the app first. This helps me stay motivated since I can see progress faster (because everything I do results in a visual change), and it also allows me to visualize the final product earlier, and gives me more time to think of good features or UX improvements.</p>\n<p>Even though I generated my project using the Tabs template, I decided that I don‚Äôt want tabs in my app. So I had to do a few changes to the routing configuration.</p>\n<p>First, I created a new page that I can use as the initial screen for my app. Ionic CLI makes it easy to create pages and components. Just running <code>ionic generate page home</code> created a page called Home, and automatically adds its modules to the Angular config, and its route to the Angular Router.</p>\n<p>After that, to remove the tabs, all I had to do was set the default route (<code>&#39;&#39;</code>) to redirect to home, and then I could delete all the Tab pages.</p>\n<div class=\"code-block svelte-qgch0c\"><div class=\"filename svelte-qgch0c\">app-routing.module.ts</div>\n\t<div class=\"lang svelte-qgch0c\">typescript</div>\n\t<pre class=\"language-typescript\"><!-- HTML_TAG_START --><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> NgModule <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> PreloadAllModules<span class=\"token punctuation\">,</span> RouterModule<span class=\"token punctuation\">,</span> Routes <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">&#123;</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    redirectTo<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span>\n    pathMatch<span class=\"token operator\">:</span> <span class=\"token string\">'full'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">loadChildren</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./home/home.module'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span> m <span class=\"token operator\">=></span> m<span class=\"token punctuation\">.</span>HomePageModule<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">NgModule</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    RouterModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span>routes<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> preloadingStrategy<span class=\"token operator\">:</span> PreloadAllModules <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  exports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>RouterModule<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppRoutingModule</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></code><!-- HTML_TAG_END --></pre>\n</div>\n<h2>Theming and Layout</h2>\n<p>For me, this is the best part. Ionic makes it SO easy to change themes! There‚Äôs a <code>variables.scss</code> file on the <code>theme</code> folder, where you can find Ionic‚Äôs default color palette and change anything. But they provide <a href=\"https://ionicframework.com/docs/theming/color-generator\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">an amazing Color Generator</a> that can make all the palette calculations for you. Just put your primary/secondary/success/danger/etc colors in there, and it will output the code for you to paste on your app.</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/color-generator.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/color-generator.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/ionic-animal-crossing-companion/color-generator.png\" alt=\"Ionic&#39;s color generation\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<p>After some time styling, I modified the layout of the two page skeletons I wanna have, the Home page (that mimics the Nookphone in the game), and I styled the header of the other pages.</p>\n<p><img src=\"/images/posts/ionic-animal-crossing-companion/skeleton.gif\" alt=\"Gif of my app's base skeleton\"></p>\n<p>Since I wanted to have the same header on all pages, I ended up creating a component for it. Since I had already two components and six pages, I decided to split them up in different folders (I honestly don‚Äôt know why Ionic doesn‚Äôt do that by default). My folder structure ended up like this:</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/modified-folder-structure.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/ionic-animal-crossing-companion/modified-folder-structure.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/ionic-animal-crossing-companion/modified-folder-structure.png\" alt=\"The folder structure after my modifications\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<p>Also, to be able to import the same component into multiple Pages (each page with its own module), I had to create the ComponentsModule. This required a bit of searching because I wasn‚Äôt familiar with this approach yet. ComponentsModule by itself is very simple, I just import the Components there:</p>\n<div class=\"code-block svelte-qgch0c\"><div class=\"filename svelte-qgch0c\">components.module.ts</div>\n\t<div class=\"lang svelte-qgch0c\">typescript</div>\n\t<pre class=\"language-typescript\"><!-- HTML_TAG_START --><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> NgModule <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> CoolHeaderComponent <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./cool-header/cool-header.component'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> IonicModule <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@ionic/angular'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">NgModule</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n    declarations<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CoolHeaderComponent<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>IonicModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    exports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CoolHeaderComponent<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ComponentsModule</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></code><!-- HTML_TAG_END --></pre>\n</div>\n<p>The annoying part was having to add ComponentsModule to each of the pages. There probably is an easier way of handling this, but right now I decided to not dig too deep into it.</p>\n<p>After making the skeleton of the app, I started working on some specific pages. I started with the home screen, that mimics a cell phone‚Äôs app grid. I‚Äôll probably add more options as the app evolves, but for now this is good enough to build the layout with.</p>\n<p>The next screen to be done was the <em>Island</em> one. It is a simple form with some text inputs, a datepicker and a couple of dropdowns. I used Ionic‚Äôs default components for them and styled them with CSS so they fit the app‚Äôs style better. Everything was pretty simple to do and worked great. Ionic‚Äôs docs made it super easy to find the available options and easier ways to theme.</p>\n<p>I wanted to add another thing to this screen too, though: a section containing the island‚Äôs villagers, and a search box that allows the user to select them. Just adding another ‚Äúcard‚Äù to the UI and making it scroll would deliver what I want, but it wouldn‚Äôt look <em>awesome</em>. GitHub‚Äôs recently released mobile app has this bottom drawer that I personally found awesome:</p>\n<p><img src=\"/images/posts/ionic-animal-crossing-companion/github-drawer.gif\" alt=\"GitHub's cool bottom drawer\"></p>\n<p>Luckily for me, someone‚Äôs already worked on something like that for Ionic, which means I don‚Äôt have to do it from scratch! <a href=\"https://github.com/AnthonyCifuentes/ion-slide-drawer\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Click here</a> to check it on GitHub. Unfortunately it is not (at the time of writing) available as an installable component on NPM or somewhere else. But the code is simple and I just copied it over to my own project.</p>\n<h2>State Management</h2>\n<p>Since the entire point of this app is learning, I decided to use <a href=\"https://ngrx.io\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">NgRx</a>. It is a State Management library for Angular that works in a similar way to VueX or Redux. I‚Äôve worked with VueX recently and really like the concept, so I decided to make use of it here.</p>\n<p>I started by adding it to my application with <code>npm i @ngrx/store @ngrx/effects @ngrx/store-devtools @ngrx/schematics --save</code>. If you wanna learn more about NgRx, I used <a href=\"https://indepth.dev/how-to-start-flying-with-angular-and-ngrx/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this amazing tutorial</a> to learn it for this app.</p>\n<h2>Database</h2>\n<p>The best way to store data in an app like mine - supposed to work on Android, iOS and the Web, but still entirely offline - is using the browser‚Äôs IndexedDB. It‚Äôs basically a simpler SQL database for your web app that lives inside the browser. <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">You can read more on MDN if you‚Äôd like</a>.</p>\n<p>While useful, IndexedDB has a very low-level API, which makes it hard to get started with. Which is why I chose to use <a href=\"https://dexie.org/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Dexie.js</a> as a wrapper for IndexedDB. It allows me to use a simple API to query data, while already doing the needed optimizations.</p>\n<p>Simply installing Dexie.js and a quick read on its documentation allowed me to successfully store and read persistent data for my app.</p>\n<h2>Putting some other cool things in practice</h2>\n<p>Since the main purpose of developing this app is learning, I decided to use some cool stuff I‚Äôve learned and put them in practice:</p>\n<ul><li><a href=\"/web-workers/\">Web Workers</a>: on first run, the app uses a web worker to parse the game data (contained in large JSON files) in the background, so it can fill the database with the data used on Critterpedia</li>\n<li>Virtual Scroll: on the Critterpedia listings, I used Virtual Scroll instead of pagination. I figured this was a better choice because while it can have a lot of items, it‚Äôs a fixed number so no need to paginate. This way it maintains good performance on scrolling even on lower-end devices. Luckily, <a href=\"https://ionicframework.com/docs/api/virtual-scroll\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Ionic provides a built-in component for that</a>!</li>\n<li>Lazy loading images: since all items in the list have an icon that‚Äôs displayed besides them, there are lots of images to download. Without lazy-loading, ALL images would be loaded right off the bat, even the ones way down the bottom of the list. With lazy loading, the browser automatically downloads only images as they would appear on screen by just setting the <code>loading</code> attribute: <code>&lt;img loading=&quot;lazy&quot;&gt;</code></li></ul>\n<h2>Running on Android</h2>\n<p>After having a few parts of my app done, I decided it was time to run in on my Android phone, to have a better look of how it will look and feel on an actual device.</p>\n<p>The first step for this is installing Android Studio. Install instructions may vary depending on your operating system. I‚Äôm on a Linux-based OS so I installed it from <a href=\"https://snapcraft.io/android-studio\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Snapcraft</a>. You can follow the instructions from the <a href=\"https://ionicframework.com/docs/developing/android\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Ionic docs</a> if you‚Äôd prefer.</p>\n<p>After installing Android Studio, we need to add an environment variable that points to the Android SDK. In the following command (Linux, Mac), replace the directory with the one where the Sdk is installed in your PC, then add it to the end of your <code>.bashrc</code> file:</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">ANDROID_SDK_ROOT</span><span class=\"token operator\">=</span><span class=\"token environment constant\">$HOME</span>/Library/Android/sdk</code><!-- HTML_TAG_END --></pre>\n</div>\n<p>Adding these next lines to the <code>.bashrc</code> file will also give you a quick way to access these Android tools if needed:</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\"><span class=\"token comment\"># avdmanager, sdkmanager</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$ANDROID_SDK_ROOT</span>/tools/bin\n\n<span class=\"token comment\"># adb, logcat</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$ANDROID_SDK_ROOT</span>/platform-tools\n\n<span class=\"token comment\"># emulator</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$ANDROID_SDK_ROOT</span>/emulator</code><!-- HTML_TAG_END --></pre>\n</div>\n<p>Now, we have to register Android as a platform for our app. Since we‚Äôre using Capacitor to make this bridge, we need only a single command:</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\">ionic capacitor <span class=\"token function\">add</span> android</code><!-- HTML_TAG_END --></pre>\n</div>\n<p><em>If you get an error saying that ‚ÄúCapacitor could not find the web assets directory‚Äù, be sure to run <code>ionic build</code> to generate this directory first.</em></p>\n<p>After that‚Äôs done, you can open the project in Android Studio (it will be on a folder called <code>Android</code> at the root of your project). If you still haven‚Äôt setup a device or emulator to run your app in, do it now. The <a href=\"https://ionicframework.com/docs/developing/android#android-studio\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Ionic docs</a> show how to do both processes.</p>\n<p>After a loooong while, Android Studio will have loaded all it needs to run your project. Just click on Run (Shift+F10). It should open on your phone/emulator!</p>\n<h2>PWA preparation</h2>\n<p>To be able to publish the app as a PWA, we need to add a Service Worker and a Manifest. Thankfully, Angular already has the CLI and the packages that allows us to do that easily. <code>ng add @angular/pwa</code> worked like a charm. This automatically added the needed files, and wired it up with the existing Angular modules automatically.</p>\n<p>After that, I edited <code>ngsw-config.json</code> and <code>manifest.webmanifest</code> files with my app‚Äôs name and colors, and I replaced all generated icons with my own. For more details on how to create PWAs with Angular, <a href=\"/angular-pwa-how-to/\">check my specific post for that</a></p>\n<h3>Routing issue</h3>\n<p>One issue I was having after publishing a PWA like that is that when refreshing my app on the browser, it was throwing a 404 error. This happened because the route had changed and Angular lost track of what it was supposed to open. I fixed this by changing a line in my <code>app-routing.module.ts</code> and adding <code>useHash: true</code> to the settings:</p>\n<div class=\"code-block svelte-qgch0c\"><div class=\"filename svelte-qgch0c\">app-routing.module.ts</div>\n\t<div class=\"lang svelte-qgch0c\">typescript</div>\n\t<pre class=\"language-typescript\"><!-- HTML_TAG_START --><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">NgModule</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    RouterModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span>routes<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> preloadingStrategy<span class=\"token operator\">:</span> PreloadAllModules<span class=\"token punctuation\">,</span> useHash<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  exports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>RouterModule<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></code><!-- HTML_TAG_END --></pre>\n</div>\n<h3>Publishing</h3>\n<p>To host my PWA, I decided to use <a href=\"https://netlify.com\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Netlify</a>. The publishing experience was quite easy and friction-free, and they also provide a free hosting plan which is perfect to host this demo-only-app. I will not document how the publishing proccess worked here because their UI is very intuitive and their docs would be way better than mine anyway.</p>\n<h2>Wrapping Up</h2>\n<p>Developing this definitely took me a while - but that‚Äôs because time‚Äôs been quite scarce for me. Most of the development time was spent learning NgRx, which was definitely the most complex part of this application. It also took me a while to find a good IndexedDB wrapper before I settled on Dexie. The rest was quite straightforward - the app logic is simple, and what took the longest was making the app pretty and the animations smooth. </p>\n<p>I think the result is quite good - definitely not professional, but more than enough for a hobby app. I learned a lot working on it and would definitely do it again. In case you missed it, <a href=\"https://pocketcompanion.fantinel.dev\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here‚Äôs another link to check out the result</a>, and its <a href=\"https://github.com/matfantinel/acnh-pocket-companion\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">source code</a>.</p>\n<p>Thanks for reading!</p>","css":{"code":"picture.svelte-1gy5t1o.svelte-1gy5t1o{position:relative;width:100%;height:100%}picture.svelte-1gy5t1o img.svelte-1gy5t1o{width:100%;height:100%}\n.code-block.svelte-qgch0c.svelte-qgch0c{display:block;position:relative;background-color:var(--code-background-color);color:var(--code-text-color);font-family:var(--mono-font);font-size:1rem;line-height:1.33em;border-radius:8px;box-shadow:var(--card-shadow);padding:30px 15px;margin:30px 0}.code-block.svelte-qgch0c pre{overflow-x:auto;scrollbar-color:var(--primary-color) var(--scrollbar-track-color);scrollbar-width:thin;padding-bottom:5px}.code-block.svelte-qgch0c pre::-webkit-scrollbar{height:8px}.code-block.svelte-qgch0c pre::-webkit-scrollbar-thumb{background:var(--primary-color)}.code-block.svelte-qgch0c pre::-webkit-scrollbar-thumb:hover{background:var(--primary-light-color)}.code-block.svelte-qgch0c .lang.svelte-qgch0c{position:absolute;right:0;top:-15px;background:inherit;border-radius:8px;padding:5px 10px;z-index:2;font-size:0.85em}.code-block.svelte-qgch0c .filename.svelte-qgch0c{background:inherit;border-top-left-radius:8px;border-top-right-radius:8px;margin-bottom:-2px;padding:5px 10px;position:absolute;left:0px;top:-15px;z-index:1}","map":null},"head":"","readingTime":"15 min read","relatedPosts":[{"slug":"angular-pwa-how-to","title":"How to transform your Angular 6+ app into a PWA","date":"2019-03-10T00:00:00.000Z","excerpt":"Make your Angular app work like a native app on phones and desktop.","tags":["Angular","PWA","Guide","Front-End","JavaScript"],"html":"<p>Recently, I‚Äôve converted my Angular 6 app into a PWA, allowing it to work offline and work like a native app on phones and desktop.</p>\n<p>Although there are many tutorials out there about turning Angular apps into PWAs, I‚Äôve decided to write one simply because I faced some issues that were a bit hard to solve, so if you end up having them you don‚Äôt lose as much time as I did!</p>\n<div class=\"callout-block info svelte-1pi2pyj\"><div class=\"icon-wrapper svelte-1pi2pyj\"><svg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg></div>\n\tThis tutorial assumes you are using Angular CLI. Possible issues are listed at the end of the tutorial.\n\n</div>\n<h2>Step 1. Installing the Angular PWA dependencies</h2>\n<p>This is the easiest part. Run <code>ng add @angular/pwa</code> in the root of your project (the folder where <code>package.json</code> is. The CLI will automagically add <code>@angular/pwa</code> and <code>@angular/service-worker</code> as dependencies in your package.json file, and add some placeholder icons in your <code>assets</code> folder.</p>\n<p>Besides that, it will create a file named <code>ngsw-config.json</code> in your root folder, as well as a <code>manifest.json</code> in your /src folder, and reference both in <code>index.html</code> and <code>app.module.ts</code>. These files are important as you‚Äôll be using them to configure your PWA later.</p>\n<h2>Step 2. Setting up your manifest.json</h2>\n<p>The <code>manifest.json</code> file is the one that tells the browser/OS about your app. You can set the full and short names, theme color, icons, and more. <a href=\"https://developers.google.com/web/fundamentals/web-app-manifest/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">You can find more about its settings here.</a></p>\n<p>Don‚Äôt forget to update the auto-generated icons on <code>/assets/icons</code> folder! These are necessary so that your app icon shows up for devices of all DPI settings.</p>\n<h2>Step 3. Setting up ngsw-config.json</h2>\n<p>This file is the one that can configure how your PWA works. You can set up different installation behaviors, as well as handle cache updates. <a href=\"https://angular.io/guide/service-worker-config\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">The Angular documentation has got all options covered here.</a></p>\n<h2>Step 4. Test it out!</h2>\n<p>If you want to test out your app‚Äôs new PWA capabilities locally, <code>ng serve</code> won‚Äôt help you. Instead, you can run a web server in your machine easily by installing the <code>http-server</code> package from npm:</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\"><span class=\"token function\">npm</span> i http-server -g</code><!-- HTML_TAG_END --></pre>\n</div>\n<p>Then, compile your app in production mode:</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\">ng build --prod</code><!-- HTML_TAG_END --></pre>\n</div>\n<p>And finally, start the web server:</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\">http-server -p <span class=\"token number\">8080</span> -c-1 dist/<span class=\"token operator\">&lt;</span>project-name<span class=\"token operator\">></span></code><!-- HTML_TAG_END --></pre>\n</div>\n<p>Your app should be up and running on <code>http://localhost:8080/</code> (or whichever port you chose). How do you know it‚Äôs a PWA? There are a few ways:</p>\n<h3>Check if the service worker is being registered</h3>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/angular-pwa-how-to/Service-Workers-1.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/angular-pwa-how-to/Service-Workers-1.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/angular-pwa-how-to/Service-Workers-1.png\" alt=\"Registered Service Worker\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  <figcaption><!-- HTML_TAG_START -->On dev console > Application > Service Workers, there should be a registered service worker for your app.<!-- HTML_TAG_END --></figcaption>\n</picture>\n<h3>Use Chrome‚Äôs Audits feature to validate it as a PWA</h3>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/angular-pwa-how-to/Audits.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/angular-pwa-how-to/Audits.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/angular-pwa-how-to/Audits.png\" alt=\"Audits\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  <figcaption><!-- HTML_TAG_START -->On dev console > Audits, test it for Progressive Web Apps.<!-- HTML_TAG_END --></figcaption>\n</picture>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/angular-pwa-how-to/Passed-Audits.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/angular-pwa-how-to/Passed-Audits.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/angular-pwa-how-to/Passed-Audits.png\" alt=\"Audits passed\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  <figcaption><!-- HTML_TAG_START -->If everything went alright, you should see the highlighted results on the 'Passed audits' section.<!-- HTML_TAG_END --></figcaption>\n</picture>\n<p>You may see some errors regarding the app not running over HTTPS. Don‚Äôt worry, that‚Äôs only because it‚Äôs running locally.</p>\n<h2>Step 5. Install it!</h2>\n<p>On Chrome, you may also see the option to install the app appear in the URL bar:</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/angular-pwa-how-to/Clipboard_2019-10-27-18-09-45.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/angular-pwa-how-to/Clipboard_2019-10-27-18-09-45.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/angular-pwa-how-to/Clipboard_2019-10-27-18-09-45.png\" alt=\"Chrome prompts you to install PWA\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<p>After this, the app should already open on a separate window, and show up on your OS‚Äôs installed apps list!</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/angular-pwa-how-to/Clipboard_2019-10-27-18-11-28.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/angular-pwa-how-to/Clipboard_2019-10-27-18-11-28.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/angular-pwa-how-to/Clipboard_2019-10-27-18-11-28.png\" alt=\"Installed PWA on OS&#39; dock\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  <figcaption><!-- HTML_TAG_START -->Notice the PWA's own icon on my OS' dock! Success!<!-- HTML_TAG_END --></figcaption>\n</picture>\n<h2>Issues Encountered</h2>\n<p>Even though the proccess is quite straight-forward, I still faced some issues when running it in my app. They were because of Angular tools versions, and I probably had these issues because I‚Äôm still running an Angular 6 app (and Angular 7 is out as of now).</p>\n<h3>The <code>ng add @angular/pwa</code> command doesn‚Äôt create relevant files</h3>\n<p>This was a <a href=\"https://github.com/angular/angular-cli/issues/11914\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">reported bug</a> on the CLI. I had a bugged version (6.0.8) installed on my app. I updated it by running</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\"><span class=\"token function\">npm</span> uninstall @angular/cli --save\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> @angular/cli@latest --save</code><!-- HTML_TAG_END --></pre>\n</div>\n<p>It updated itself to version 7.1.4 and worked flawlessly.</p>\n<p><em>Notice: this is related to the local cli version, the one displayed on your <code>package.json</code> file, not the global one installed in your machine.</em></p>\n<h3>Failed to register a ServiceWorker: A bad HTTP response code (404) was received when fetching the script.</h3>\n<p>This error shows up on the browser console after opening the app running on http-server. It happens because, when running <code>ng build --prod</code>, Angular isn‚Äôt sending the service worker‚Äôs files along with the ones from the app. You can confirm this by searching for the <code>ngsw-worker.js</code> file on the <code>/dist</code> folder of your app. If it‚Äôs not there, then you have this issue.</p>\n<p>This one took me the longest to find out. Another bug related to outdated versions of Angular tools. Simply changing <code>@angular-devkit/build-angular</code> version in devDependencies to <code>~0.10.0</code> solved it.</p>\n<h2>Finalizing</h2>\n<p>I hope you had success on setting up your PWA! Remember that, when published, it will only work if you serve your app through HTTPS.</p>\n<p>Thanks for reading!</p>","css":{"code":".callout-block.svelte-1pi2pyj.svelte-1pi2pyj{--bg-color:var(--callout-background-color);--accent-color:transparent;margin:40px 0 30px;padding:25px 25px;border-top-right-radius:10px;border-bottom-right-radius:10px;background:var(--bg-color);color:var(--text-color);border-left:4px solid var(--accent-color);position:relative}.callout-block.svelte-1pi2pyj .icon-wrapper.svelte-1pi2pyj{position:absolute;width:50px;height:50px;top:0;left:0;transform:translate(calc(-50% - 1.5px), -50%);background:var(--post-page-background-color);padding:8px;border-radius:50%;fill:var(--accent-color);color:var(--accent-color)}.callout-block.info.svelte-1pi2pyj.svelte-1pi2pyj{--bg-color:var(--callout-info-background-color);--accent-color:var(--callout-info-accent-color)}.callout-block.warning.svelte-1pi2pyj.svelte-1pi2pyj{--bg-color:var(--callout-warning-background-color);--accent-color:var(--callout-warning-accent-color)}.callout-block.error.svelte-1pi2pyj.svelte-1pi2pyj{--bg-color:var(--callout-error-background-color);--accent-color:var(--callout-error-accent-color)}.callout-block.success.svelte-1pi2pyj.svelte-1pi2pyj{--bg-color:var(--callout-success-background-color);--accent-color:var(--callout-success-accent-color)}\n.code-block.svelte-qgch0c.svelte-qgch0c{display:block;position:relative;background-color:var(--code-background-color);color:var(--code-text-color);font-family:var(--mono-font);font-size:1rem;line-height:1.33em;border-radius:8px;box-shadow:var(--card-shadow);padding:30px 15px;margin:30px 0}.code-block.svelte-qgch0c pre{overflow-x:auto;scrollbar-color:var(--primary-color) var(--scrollbar-track-color);scrollbar-width:thin;padding-bottom:5px}.code-block.svelte-qgch0c pre::-webkit-scrollbar{height:8px}.code-block.svelte-qgch0c pre::-webkit-scrollbar-thumb{background:var(--primary-color)}.code-block.svelte-qgch0c pre::-webkit-scrollbar-thumb:hover{background:var(--primary-light-color)}.code-block.svelte-qgch0c .lang.svelte-qgch0c{position:absolute;right:0;top:-15px;background:inherit;border-radius:8px;padding:5px 10px;z-index:2;font-size:0.85em}.code-block.svelte-qgch0c .filename.svelte-qgch0c{background:inherit;border-top-left-radius:8px;border-top-right-radius:8px;margin-bottom:-2px;padding:5px 10px;position:absolute;left:0px;top:-15px;z-index:1}\npicture.svelte-1gy5t1o.svelte-1gy5t1o{position:relative;width:100%;height:100%}picture.svelte-1gy5t1o img.svelte-1gy5t1o{width:100%;height:100%}","map":null},"head":""},{"slug":"what-are-pwas-and-why-should-i-care-about-them","title":"What are PWAs and why should I care about them?","date":"2019-03-12T00:00:00.000Z","excerpt":"We see a lot of talk about PWAs, but the concept is not that easy to understand.","tags":["Front-End","PWA","JavaScript"],"html":"<p>Progressive Web Apps are not new, but they are becoming more and more popular everyday. Big companies like Facebook, Twitter and Google have been using them for a while, and while they‚Äôre often designed for mobile, recent pushes from Microsoft and Chrome are making them a good option even for desktop.</p>\n<p><a href=\"/angular-pwa-how-to\">I‚Äôve covered how you can turn your Angular 6+ app into a PWA here</a>. Now, let‚Äôs see why you should do that.</p>\n<h2>What is a PWA?</h2>\n<p>Native apps, the ones that are designed to work specifically on Mobile/Desktop OSs, usually have some useful features, like access to the device‚Äôs functionalities like camera, GPS, sending notifications, working offline, and so on. They also are able to utilize the device‚Äôs full screen (on mobile), show up on the home screen, and are usually pretty fast to load.Web apps though, need to be accessed by a browser. This takes away some screen real estate, since the browser‚Äôs UI is also shown. They cannot work offline, can only show up on the home screen as a shortcut to the browser, and usually take longer to load, since its assets need to be loaded from the web.</p>\n<p>PWAs, or Progressive Web Apps, are basically websites that have the ability to deliver a native app-like experience, by sending notifications, offering a snappier and more responsive experience, working offline, etc. This is achieved with the use of modern Web APIs, and a little thing called <strong>Service Worker</strong>.</p>\n<p><em>Please keep in mind that hybrid apps developed with Ionic, Cordova, or similar frameworks <strong>are not PWAs</strong>, since they are installed like a real app and have full access to the device.</em></p>\n<h3>Service Worker?</h3>\n<p>A Service Worker is like a client-side proxy, written in Javascript, that powers offline functionality, push notifications, caching, updating, and more.</p>\n<p>They can, for instance, listen for any http requests and handle them nicely, like retrieving cached data if there‚Äôs no internet connection. To avoid problems with updates, since it caches content more aggressively, it can be configured to update itself everytime it sees there is a new version online. This avoids problems with users using older versions of our web apps (and therefore gets rid of native apps‚Äô biggest nuisance).</p>\n<p>This all may sound complicated, which is why there are many ‚Äúrecipes‚Äù of Service Workers around the web. They are still JavaScript files, so it‚Äôs not hard to adapt and improve them at your own pace.</p>\n<p>You probably have already found some of them in the wild. In Chrome for Android, opening a certain website might trigger this panel at the bottom of the screen:</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/what-are-pwas-and-why-should-i-care-about-them/Android-Install-Prompt.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/what-are-pwas-and-why-should-i-care-about-them/Android-Install-Prompt.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/what-are-pwas-and-why-should-i-care-about-them/Android-Install-Prompt.png\" alt=\"PWA Install Prompt on Android\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  <figcaption><!-- HTML_TAG_START -->'Add Notepad to the home screen'<!-- HTML_TAG_END --></figcaption>\n</picture>\n<p>And on Desktop, this option shows up in the URL bar:</p>\n<picture class=\"svelte-1gy5t1o\"><source srcset=\"/optimized-images/posts/what-are-pwas-and-why-should-i-care-about-them/Clipboard_2019-10-27-18-09-45.avif\" type=\"image/avif\">\n\t<source srcset=\"/optimized-images/posts/what-are-pwas-and-why-should-i-care-about-them/Clipboard_2019-10-27-18-09-45.webp\" type=\"image/webp\">\n\t<img src=\"/optimized-images/posts/what-are-pwas-and-why-should-i-care-about-them/Clipboard_2019-10-27-18-09-45.png\" alt=\"Chrome prompts you to install PWA\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1gy5t1o\">\n  \n</picture>\n<p>With this, your app is able to be displayed on your phone or PC‚Äôs app list just like any other app. Cool!</p>\n<p><em>Keep in mind that for now only a few Chromium-based browsers offer this functionality on Android. Firefox, sadly, is not allowed by Google to create WebAPKs (how these are called). Thanks, free market!</em> üôÑ</p>\n<h2>That‚Äôs nice and all‚Ä¶ But how would my app benefit from it?</h2>\n<p>Let‚Äôs get one thing out of the way first - <strong>PWAs are not a replacement for native apps</strong>. They have more limitations, and overall offer worse performance than a native app written in Java/Swift. Their purpose is to offer a better user experience for web apps that are used often by users. If you have a complex web app, and do not have the time/resources or simply don‚Äôt think it‚Äôs worth it to create a native counterpart, PWAs are for you. I will compare PWAs to hybrid apps, like the ones built on Ionic.</p>\n<p>The first main advantage is that the entry barrier is lower. Research shows that <a href=\"https://techcrunch.com/2017/08/25/majority-of-u-s-consumers-still-download-zero-apps-per-month-says-comscore/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the majority of mobile users in the US download an average of 0 apps monthly</a>. That‚Äôs zero. None. That may be because searching for an app in the app store may be a bit counterintuitive depending on the situation. Let‚Äôs imagine that you have an hybrid app on the app store. Your new user probably found out about your app/service on its website, so they‚Äôre already in the browser:</p>\n<ol><li>Logs in to your app on the browser;</li>\n<li>You detect that they‚Äôre using a mobile phone, so you can show them a banner to download your app on the store;</li>\n<li>They open the app store;</li>\n<li>They try to download your app. Or, they might give up because they‚Äôre on their limited data plan, and avoids downloading apps on it.</li>\n<li>They can either return to the web app on the browser, with all the disavantadges mentioned before, or use your hybrid app.</li></ol>\n<p>If the user has installed your app, cool! However, you must still keep one thing in mind: your app updates independently from your web app, and the updates will take longer. Some users might even disable autoupdates altogether. Depending on how your app works, you might suffer from users using outdated versions of the code, which might result in issues for them and for you.</p>\n<p>Now let‚Äôs imagine the same flow, but with a PWA:</p>\n<ol><li>Logs in to your app on the browser;</li>\n<li>A panel shows up on the bottom of their screen: ‚ÄúHey, add this to your home screen!‚Äú;</li>\n<li>The app is installed into the user‚Äôs phone and can now be accessed from the app list, with better screen estate, better performance (because of caching), and easier to open;</li>\n<li>Your app is always on-par with the web version.</li></ol>\n<p>Another worthy thing to mention is that you don‚Äôt have to go through the hassle of publishing an app on the app store!</p>\n<h2>There are advantages even if the user doesn‚Äôt install your web app</h2>\n<p>So far I‚Äôve covered how your app would benefit from users being able to install the app directly from the browser. But still, a lot of the PWA benefits still apply even if they don‚Äôt.</p>\n<p>Even when opened in a browser, a PWA can still offer:</p>\n<ul><li>Better speed after first load, due to the more aggressive cacheing of the static content;</li>\n<li>Less jankiness and more responsiveness overall, since the content will be loaded from the user‚Äôs device instead of downloaded dynamically;</li>\n<li>Won‚Äôt be affected by variations in the user‚Äôs connection.</li></ul>\n<h2>How can I convince my boss to let me work on this?</h2>\n<p>Well, every boss is different. But <a href=\"http://https//developers.google.com/web/progressive-web-apps/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Google provides some neat statistics that may help you in your endeavor</a>:</p>\n<ul><li>Push notifications increase user engagement by up to 4 times;</li>\n<li>Some use cases report that the increase in conversions after transitioning to a PWA was of 104%!</li></ul>\n<h2>As with all things, don‚Äôt overdo it</h2>\n<p>This article covered the concept and advantages of PWAs, but keep in mind that they are not for every use case. <strong>Use it for web apps that users will find themselves coming back to frequently</strong>. There‚Äôs no point in doing it for your company‚Äôs website or static websites. It‚Äôs also worth remembering that <strong>PWAs do not replace native apps, they are just a lower-effort alternative for web apps without native counterparts</strong>.</p>\n<p>It‚Äôs also worth mentioning that the advantages cited in this article are, as of March 2019, <strong>fully supported only by Google Chrome/Chromium</strong>. Google‚Äôs been pushing PWAs hardly lately and other companies still have some catching up to do. iOS 11.3 saw the addition of basic PWA capabilities on Safari, but some features still do not work. Firefox for Android also supports some PWA capabilities, but does not prompt the user the same way Chrome does (because Google won‚Äôt allow it, may I add).</p>\n<p>Thanks for reading!</p>","css":{"code":"picture.svelte-1gy5t1o.svelte-1gy5t1o{position:relative;width:100%;height:100%}picture.svelte-1gy5t1o img.svelte-1gy5t1o{width:100%;height:100%}","map":null},"head":""},{"slug":"2019-year-in-review","title":"Cool things I did and learned in 2019","date":"2019-12-29T00:00:00.000Z","excerpt":"A quick look back at 2019 and what I learned during this year.","tags":["Meta","Open Source"],"html":"<p>Another year went by - Year 6 of my software development journey! I wanted to write this blog post to sum up stuff that I‚Äôve done or learned this year. Keep in mind this is being written off the top of my head - I did not keep a journal throughout the year, but hopefully that‚Äôs something I‚Äôll do in 2020.</p>\n<h2>Complexity is your enemy</h2>\n<p>As programmers, we are puzzle-solvers. We like to think outside the box, applying different concepts, putting all of those nice things we‚Äôve learned everywhere. This‚Ä¶ often backfires. Most of the time what works best are the simplest solutions, which are also easier to maintain in the future by you or others. I‚Äôve seen this quote somewhere a while back: ‚ÄúProgrammers spend the first years of their careers mastering complexity only to realize they should master simplicity instead‚Äù. I guess I‚Äôm not in my first years anymore?</p>\n<p>I‚Äôve changed my process in writing code to this:</p>\n<ol><li>Understand the problem/goal;</li>\n<li>Draw a simple mental picture of how to solve it (really simplify it);</li>\n<li>Code in small steps and test them as you go;</li>\n<li>Make it work. Code can look quite ugly in this step;</li>\n<li>Optimize it, performance-wise;</li>\n<li>‚≠êÔ∏è Try to explain how it works to yourself (mentally or by text), and then refactor the code to be as simple as possible;</li></ol>\n<p>This last step might make the initial release take a little longer, but oh boy does it pay off whenever you or someone else has to maintain it.</p>\n<h2>Vanilla JS is the best</h2>\n<p>Wait, I‚Äôm not saying you shouldn‚Äôt use any framework. If it helps you do your work better, go ahead! But ‚ÄúVanilla‚Äù JS has come such a long way and there are so many amazing APIs coming out that using it solely is a valid option again. But more than that, those APIs are built in a way that popular frameworks can use them and communicate with each other with little effort. I‚Äôve covered a bit of this on <a href=\"/microfrontends/\">my Microfrontends post</a>, but there are more APIs that I‚Äôve discovered this year that are pretty awesome:</p>\n<ul><li><a href=\"/microfrontends/\">Web Components/Shadow DOM/Custom Elements</a>;</li>\n<li><a href=\"/web-workers/\">Web Workers</a>;</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">IntersectionObserver</a>;</li>\n<li>Not exactly new, but <a href=\"/what-are-pwas-and-why-should-i-care-about-them/\">PWAs</a> are increasingly awesome;</li></ul>\n<h2>Jekyll</h2>\n<p>I‚Äôm a bit late to the party, but this is still something I‚Äôve found out about in 2019. This website/blog you‚Äôre seeing is built on top of Jekyll, a tool for making static websites.</p>\n<p>Basically, you have HTML, CSS and JS. Add some special powers for using variables/loops inside that HTML code and ta-da! It works. Jekyll also allows you to create pages from Markdown (.md) files. I use it for blog posts like this one.</p>\n<p>Since it‚Äôs a static website, it means the code that‚Äôs served to users/visitors is compiled just once and then served as HTML files. No servers or APIs necessary. It‚Äôs pretty cool. You can check more about Jekyll <a href=\"https://jekyllrb.com/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a> and can check the source code for my website <a href=\"https://github.com/matfantinel/matfantinel.github.io\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a>.</p>\n<h2>Open Source is awesome</h2>\n<p>I have released two open-source apps this year for elementaryOS (<a href=\"https://github.com/matfantinel/reminduck\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Reminduck</a> and <a href=\"https://github.com/matfantinel/moneta\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Moneta</a>). I gotta say, besides the fact that I was learning an entirely different development stack (Vala, GTK, Desktop native), the best ‚Äúnew‚Äù thing I enjoyed was doing it in the open.</p>\n<p>These are not complex, commercial apps or anything like that. They‚Äôre small utilities that I use on a daily basis and that were made open and released in hopes of helping anyone out there too. And I gotta say, having users like your software is great, but having them actively contribute to it is even better. As soon as they were released/made public, I started receiving pull requests, bug reports, feature requests, and translations from everywhere. <strong>It‚Äôs so amazing that people from all over the world took interest in my little idea and helped improve them any way they could.</strong></p>\n<p>But open source is not just other people contributing to your projects, it‚Äôs also the opposite! I can improve other people‚Äôs apps that I use, I can report bugs openly and help out, or just download the source code, change a few things just to fit my workflow better and run it. And not only apps, I can do that with the entire OS I run on my PC! Not to mention having access to other people‚Äôs code allows you to learn from their work and saves you tons of time. Having a problem on your app and you know one that has solved that? Just check out what they did. Copy it, modify it, learn it, ship it. It‚Äôs all good.  <span class=\"wrapper svelte-1sgfl7c\">We wouldn‚Äôt have to spend so much time reinventing wheels if more of our code was open.</span></p>\n<p>Ah, this website is also open source. I used others as inspiration and took some code snippets too! So can you, feel free to fork it and modify anyway you want.</p>\n<h2>Working remotely is fun, at least for some people</h2>\n<p>In August I started working remotely for the first time. I work from my home in Brazil with people from US, Europe and India. It was definitely refreshing to not have to commute and always be at a place that makes you feel good. Not only that, but the flexible hours allow me to work whenever I want and I can enjoy things that weren‚Äôt possible on a regular ‚Äú9 to 5‚Äù routine.</p>\n<p>Although‚Ä¶ I end up working the same hours as I did before. It feels ‚Äúright‚Äù to work at this time, and I can enjoy my family at night, since they also work during the day. But it‚Äôs nice to have the flexibility to have a break and a coffee somewhere else during the day if needed.</p>\n<p>One of the main things people say about working from home is that sometimes it‚Äôs hard to separate work time from free time. Fortunately, I didn‚Äôt have that issue. My apartment is quite small, so I don‚Äôt have a proper office and instead work on a desk on my bedroom, which means the temptation of lying down and sleeping is always beside me. I‚Äôm so thankful I am able to resist that and get work done. And after work hours I can fully disconnect from it and not be stressed out, even if I stay on the computer. I totally understand why some people would not enjoy this and would be less productive, fortunately I was not the case.</p>\n<p>The one thing I‚Äôd say is worse in my case is communication. I‚Äôm not an extremely social person - therefore I don‚Äôt miss chitchat during the day with colleagues or anything like that. It‚Äôs just that it‚Äôs harder to explain code and concepts over a call or screen share. Not everyone is always readily available to explain things because of different timezones, so you have to figure more things out on your own. It‚Äôs still doable though, and the days of ‚Äújust coding‚Äù without interruptions are a dream. The pros outweight the cons.</p>\n<h2>There‚Äôs never enough time</h2>\n<p>This year, I started getting into writing more open source software and started working from home. The latter means I can work more on house chores since there‚Äôs no commute and I‚Äôm always around! Still, there‚Äôs never enough time for me to do what I want to do. I took time to write some elementaryOS apps, but I want to do some web apps too, and code some more, and play some games, watch series, movies, hang out with family, work, write on this blog, oof. This isn‚Äôt a new discovery by any means, but I feel like it‚Äôs getting worse every year. This is adult life, I guess.</p>\n<h2>Wrapping up</h2>\n<p>Anyway, 2019 was a good year. I (of course) hope to do more and better in 2020, hopefully including more articles here. Hope you all have some nice holidays and a great new year!</p>","css":{"code":".wrapper.svelte-1sgfl7c{background:var(--highlight-marker-url)}","map":null},"head":""}]}